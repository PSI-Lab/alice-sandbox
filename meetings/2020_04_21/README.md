## bpRNA

Implemented my own util to convert dot-bracket notation to upper triangular matrix format.
Completed processing of bpRNA dataset.
See [https://github.com/PSI-Lab/alice-sandbox/tree/56adc728740410c78ba30fdb81085792de472fbc/rna_ss/data_processing/spot_rna/bp_rna](https://github.com/PSI-Lab/alice-sandbox/tree/56adc728740410c78ba30fdb81085792de472fbc/rna_ss/data_processing/spot_rna/bp_rna).


## dataset description

- Rfam151

    - see [../../rna_ss/data_processing/rna_cg/](../../rna_ss/data_processing/rna_cg/)

    - from http://www.rnasoft.ca/CG/

    - 151 structures from Rfam, as collected by Do et al. for CONTRAfold training

- PDB250

    - see [../../rna_ss/data_processing/pdb_250/](../../rna_ss/data_processing/pdb_250/)

    - from SPOT-RNA paper SI https://www.nature.com/articles/s41467-019-13395-9

    - used for fine-tuning & testing

- s_processed (train & test)

    - see [../../rna_ss/data_processing/rna_cg/](../../rna_ss/data_processing/rna_cg/)

    - from http://www.rnasoft.ca/CG/

    - 5273 structures (most of them are restricted), processed from known RNA secondary structures.
    Used for training and testing in "Constraint Generation (CG) - an algorithm for efficient RNA parameter estimation".

- rnastralign

    - see [../../rna_ss/data_processing/e2efold/](../../rna_ss/data_processing/e2efold/)

    - from E2Efold paper

    - 37138 sequences, use for E2Efold training

- archiveII

    - see [../../rna_ss/data_processing/e2efold/](../../rna_ss/data_processing/e2efold/)

    - from E2Efold paper

    - 3975 sequences, use for E2Efold training

- bpRNA

    - see [../../rna_ss/data_processing/spot_rna/bp_rna/](../../rna_ss/data_processing/spot_rna/bp_rna/)

    - from SPOT-RNA paper

    - used for training



## dataset overlapping

Looking at both identical and highly similar sequences.


```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/rfam.pkl --d2 ../../rna_ss/data_processing/rna_cg/data/s_processed.pkl

../../rna_ss/data_processing/rna_cg/data/rfam.pkl 151
../../rna_ss/data_processing/rna_cg/data/s_processed.pkl 5253
Found 5 similar out of a total 151
n_identical 1
```

```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/rfam.pkl --d2 ../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl

../../rna_ss/data_processing/rna_cg/data/rfam.pkl 151
../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl 241
Found 1 similar out of a total 151
n_identical 0
```


```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/rfam.pkl --d2 ../../rna_ss/data_processing/spot_rna/bp_rna/data/bp_rna.pkl.gz

../../rna_ss/data_processing/rna_cg/data/rfam.pkl 151
../../rna_ss/data_processing/spot_rna/bp_rna/data/bp_rna.pkl.gz 13419
Found 85 similar out of a total 151
n_identical 30
```


```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/rfam.pkl --d2 ../../rna_ss/data_processing/e2efold/data/rnastralign.pkl.gz


TODO (needs py3, having trouble with conda)
```



```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/s_processed.pkl --d2 ../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl

../../rna_ss/data_processing/rna_cg/data/s_processed.pkl 5253
../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl 241
Found 61 similar out of a total 5253
n_identical 16
```

```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/rna_cg/data/s_processed.pkl --d2 ../../rna_ss/data_processing/spot_rna/bp_rna/data/bp_rna.pkl.gz

# still running
```


```
python compute_dataset_overlap.py --d1 ../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl --d2 ../../rna_ss/data_processing/spot_rna/bp_rna/data/bp_rna.pkl.gz


../../rna_ss/data_processing/pdb_250/data/pdb_250.pkl 241
../../rna_ss/data_processing/spot_rna/bp_rna/data/bp_rna.pkl.gz 13419
Found 15 similar out of a total 241
n_identical 1
```





## Probing dataset comparison


subset to transcripts with low p_val

Generated by https://github.com/deepgenomics/communal-sandbox/blob/9bc3a4e17ff1b75aac31dfd7cdccc79eadf0bf75/analysis/rna_ss/evaluate_probing_dataset/dataset_comparison_all.ipynb


See [dataset_comparison.html](dataset_comparison.html)


## other


http://software.broadinstitute.org/software/igv/node/284


## TODO

- finish running sequence alignment + dataset comparison

- RNA families & species in each dataset

- Run E2Efold and SPOT-RNA on above dataset

- short RNA, probing data v.s. RNAfold
